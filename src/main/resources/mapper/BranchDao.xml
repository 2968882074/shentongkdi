<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.yidu.shentongkdi.dao.BranchDao">

    <resultMap type="com.yidu.shentongkdi.entity.Branch" id="BranchMap">
        <result property="brid" column="brid" jdbcType="INTEGER"/>
        <result property="branchname" column="branchName" jdbcType="VARCHAR"/>
        <result property="brpone" column="brpone" jdbcType="VARCHAR"/>
        <result property="postcode" column="postcode" jdbcType="VARCHAR"/>
        <result property="business" column="business" jdbcType="VARCHAR"/>
        <result property="branchtype" column="branchType" jdbcType="VARCHAR"/>
        <result property="idnumber" column="IDnumber" jdbcType="VARCHAR"/>
        <result property="unusualpone" column="unusualPone" jdbcType="VARCHAR"/>
        <result property="nextnumber" column="nextNumber" jdbcType="VARCHAR"/>
        <result property="subordinate" column="Subordinate" jdbcType="VARCHAR"/>
        <result property="brnumberpone" column="brNumberPone" jdbcType="VARCHAR"/>
        <result property="workaddress" column="workAddress" jdbcType="VARCHAR"/>
    </resultMap>

    <!--查询单个-->
    <select id="queryById" resultMap="BranchMap">
        select
          brid, branchName, brpone, postcode, business, branchType, IDnumber, unusualPone, nextNumber, Subordinate, brNumberPone, workAddress
        from shentong.branch
        where brid = #{brid}
    </select>
    <!--统计-->
    <select id="count" resultType="int">
        select
          count(*)
        from shentong.branch
    </select>
    <!--查询指定行数据-->
    <select id="queryAllByLimit" resultMap="BranchMap">
        select
          brid, branchName, brpone, postcode, business, branchType, IDnumber, unusualPone, nextNumber, Subordinate, brNumberPone, workAddress
        from shentong.branch
        <where>
            <if test="branchName!=null">
                branchName like "%"#{branchName}#"%"
            </if>
        </where>
        limit #{offset}, #{limit}
    </select>

    <!--通过实体作为筛选条件查询-->
    <select id="queryAll" resultMap="BranchMap">
        select
        brid, branchName, brpone, postcode, business, branchType, IDnumber, unusualPone, nextNumber, Subordinate,
        brNumberPone, workAddress
        from shentong.branch
        <where>
            <if test="brid != null">
                and brid = #{brid}
            </if>
            <if test="branchname != null and branchname != ''">
                and branchName = #{branchname}
            </if>
            <if test="brpone != null and brpone != ''">
                and brpone = #{brpone}
            </if>
            <if test="postcode != null and postcode != ''">
                and postcode = #{postcode}
            </if>
            <if test="business != null and business != ''">
                and business = #{business}
            </if>
            <if test="branchtype != null and branchtype != ''">
                and branchType = #{branchtype}
            </if>
            <if test="idnumber != null and idnumber != ''">
                and IDnumber = #{idnumber}
            </if>
            <if test="unusualpone != null and unusualpone != ''">
                and unusualPone = #{unusualpone}
            </if>
            <if test="nextnumber != null and nextnumber != ''">
                and nextNumber = #{nextnumber}
            </if>
            <if test="subordinate != null and subordinate != ''">
                and Subordinate = #{subordinate}
            </if>
            <if test="brnumberpone != null and brnumberpone != ''">
                and brNumberPone = #{brnumberpone}
            </if>
            <if test="workaddress != null and workaddress != ''">
                and workAddress = #{workaddress}
            </if>
        </where>
    </select>

    <!--新增所有列-->
    <insert id="insert" keyProperty="brid" useGeneratedKeys="true">
        insert into shentong.branch(branchName, brpone, postcode, business, branchType, IDnumber, unusualPone, nextNumber, Subordinate, brNumberPone, workAddress)
        values (#{branchname}, #{brpone}, #{postcode}, #{business}, #{branchtype}, #{idnumber}, #{unusualpone}, #{nextnumber}, #{subordinate}, #{brnumberpone}, #{workaddress})
    </insert>

    <insert id="insertBatch" keyProperty="brid" useGeneratedKeys="true">
        insert into shentong.branch(branchName, brpone, postcode, business, branchType, IDnumber, unusualPone,
        nextNumber, Subordinate, brNumberPone, workAddress)
        values
        <foreach collection="entities" item="entity" separator=",">
            (#{entity.branchname}, #{entity.brpone}, #{entity.postcode}, #{entity.business}, #{entity.branchtype},
            #{entity.idnumber}, #{entity.unusualpone}, #{entity.nextnumber}, #{entity.subordinate},
            #{entity.brnumberpone}, #{entity.workaddress})
        </foreach>
    </insert>

    <insert id="insertOrUpdateBatch" keyProperty="brid" useGeneratedKeys="true">
        insert into shentong.branch(branchName, brpone, postcode, business, branchType, IDnumber, unusualPone,
        nextNumber, Subordinate, brNumberPone, workAddress)
        values
        <foreach collection="entities" item="entity" separator=",">
            (#{entity.branchname}, #{entity.brpone}, #{entity.postcode}, #{entity.business}, #{entity.branchtype},
            #{entity.idnumber}, #{entity.unusualpone}, #{entity.nextnumber}, #{entity.subordinate},
            #{entity.brnumberpone}, #{entity.workaddress})
        </foreach>
        on duplicate key update
        branchName = values(branchName) , brpone = values(brpone) , postcode = values(postcode) , business =
        values(business) , branchType = values(branchType) , IDnumber = values(IDnumber) , unusualPone =
        values(unusualPone) , nextNumber = values(nextNumber) , Subordinate = values(Subordinate) , brNumberPone =
        values(brNumberPone) , workAddress = values(workAddress)
    </insert>

    <!--通过主键修改数据-->
    <update id="update">
        update shentong.branch
        <set>
            <if test="branchname != null and branchname != ''">
                branchName = #{branchname},
            </if>
            <if test="brpone != null and brpone != ''">
                brpone = #{brpone},
            </if>
            <if test="postcode != null and postcode != ''">
                postcode = #{postcode},
            </if>
            <if test="business != null and business != ''">
                business = #{business},
            </if>
            <if test="branchtype != null and branchtype != ''">
                branchType = #{branchtype},
            </if>
            <if test="idnumber != null and idnumber != ''">
                IDnumber = #{idnumber},
            </if>
            <if test="unusualpone != null and unusualpone != ''">
                unusualPone = #{unusualpone},
            </if>
            <if test="nextnumber != null and nextnumber != ''">
                nextNumber = #{nextnumber},
            </if>
            <if test="subordinate != null and subordinate != ''">
                Subordinate = #{subordinate},
            </if>
            <if test="brnumberpone != null and brnumberpone != ''">
                brNumberPone = #{brnumberpone},
            </if>
            <if test="workaddress != null and workaddress != ''">
                workAddress = #{workaddress},
            </if>
        </set>
        where brid = #{brid}
    </update>

    <!--通过主键删除-->
    <delete id="deleteById">
        delete from shentong.branch where brid = #{brid}
    </delete>

</mapper>